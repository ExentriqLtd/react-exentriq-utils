const getFormattedTime = (timestampDate: Date) => {
  const leadingZero = (timestampDate: number) => `0${timestampDate}`.slice(-2);
  return [timestampDate.getHours(), timestampDate.getMinutes()]
    .map(leadingZero)
    .join(":");
};

const getFormattedDate = (timestamp: number): string => {
  const timestampDate = new Date(timestamp);
  const pad = (s: number) => (s < 10 ? "0" + s : s);
  return [
    pad(timestampDate.getDate()),
    pad(timestampDate.getMonth() + 1),
    pad(timestampDate.getFullYear()),
  ].join("/");
};

export const utilityGetRelativeDate = (timestamp: number): string => {
  const timestampDate = new Date(timestamp);
  const isYesterday =
    timestampDate.getDate() === new Date().getDate() - 1 &&
    timestampDate.getMonth() === new Date().getMonth() &&
    timestampDate.getFullYear() === new Date().getFullYear();

  if (isYesterday) return "Ieri";
  return getFormattedDate(timestamp);
};

export const utilityFormatDate = (timestamp: number): string => {
  const timestampDate = new Date(timestamp);
  const isToday =
    timestampDate.getDate() === new Date().getDate() &&
    timestampDate.getMonth() === new Date().getMonth() &&
    timestampDate.getFullYear() === new Date().getFullYear();
  if (isToday) return getFormattedTime(timestampDate);
  else return utilityGetRelativeDate(timestamp);
};
